<!--
	编写HTML5页面，输入一个键和一个值，单击“增加”按钮将输入数据进行保存，单击“清除”按钮删除所有的保存数据。
-->
<!DOCTYPE html>
<html lang="en">
<head>
	<title>web存储</title>
	<meta charset="utf-8">
	<style type="text/css">
		
		table{
			border-collapse: collapse;
			border:1px solid #000000;
		}
		th,td{
			border:1px solid #000000;
			padding: 1px;
			text-align: center;
			width: 120px;
		}
	</style>
</head>
<body>
	<div id="page">
		<div id="actarea">
			<div>
				<label>键</label>
				<input id="key" type="text"/>
			</div>
			<div>
				<label>值</label>
				<input id="value" type="text"/>
			</div>
			<div id="buttons">
				<button id="add">
					添加
				</button>
				<button id="clear">
					清除
				</button>
			</div>
		</div>
		<br/>
		<div id="contable">
			<table id="data">
			</table>
		</div>
	</div>
	<script type="text/javascript">
		//装在网页，从本地存储装载数据
		displayData();
		var buttons = document.getElementByTagName("buttons");
		for(var i=0; i<buttons.length; i++){
			buttons[i].onclick = handleButtonPress;
		}

		function displayData(){
			//加载数据
			var tableElement = document.getElementById("data");
			tableElement.innerHTML = "<tr><th>键</th><th>值</th></tr>";
			var itemCount = localStorage.length;
			for(var i = 0; i<itemCount; i++){
				var key = localStorage.key(i);
				var value = localStorage.geteItem(key);
				tableElement.innerHTML +="<tr><td>"+key+"</td><td>"+value+"</td></tr>";
			}
		}

		function handleButtonPress(e){
			switch(e.target.id){
				case "add":
					var key = document.getElementById("key").value;
					var value = document.getElementById("value").value;
					localStorage.setItem(key, value);
					displayData();
					break;
				case "clear":
					localStorage.clear();
					displayData();
					break;
				default:
					break;
			}
		}

	</script>
</body>
</html>